/**
 * Copyright (c) 2016 - 2020 Sqreen. All Rights Reserved.
 * Please refer to our terms for more information: https://www.sqreen.io/terms.html
 */
'use strict';
const SCOPE_MAP = new Map();
const Transports = require('../transports');
SCOPE_MAP.set(Transports.ServerTransport, require('./server'));
SCOPE_MAP.set(Transports.ClientTransport, require('./client'));
SCOPE_MAP.set(Transports.ProducerTransport, require('./producer'));
SCOPE_MAP.set(Transports.ConsumerTransport, require('./consumer'));

module.exports.trace = function (fields) {

    // TODO: harden to check fields
    const fct = SCOPE_MAP.get(fields.constructor);
    if (fct) {
        return fct(fields);
    }
    return null;
};
